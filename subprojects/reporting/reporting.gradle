import org.gradle.gradlebuild.unittestandcompile.ModuleType

plugins {
    id 'javascript-base'
}

configurations {
    reports
}

repositories {
    javaScript.googleApis()
}

dependencies {
    compile libraries.groovy.coordinates
    compile project(':core')
    compile libraries.jatl.coordinates

    testCompile testLibraries.jsoup
    integTestRuntime project(':codeQuality')
    integTestRuntime project(':jacoco')

    reports "jquery:jquery.min:1.11.0@js"
}

gradlebuildJava {
    moduleType = ModuleType.WORKER
}

testFixtures {
    from(':core')
}

def generatedResourcesDir = gradlebuildJava.generatedResourcesDir

def reportResources = tasks.register("reportResources", Copy) {
    from configurations.reports
    into "$generatedResourcesDir/org/gradle/reporting"
}
sourceSets.main.output.dir generatedResourcesDir, builtBy: reportResources
